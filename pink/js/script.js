var pageHeader=document.querySelector(".page-header"),navMain=document.querySelector(".main-nav"),navToggle=document.querySelector(".main-nav__toggle");navMain.classList.remove("main-nav--nojs"),pageHeader.classList.remove("page-header--nojs"),navToggle.addEventListener("click",function(){navMain.classList.contains("main-nav--closed")?(navMain.classList.remove("main-nav--closed"),navMain.classList.add("main-nav--opened")):(navMain.classList.add("main-nav--closed"),navMain.classList.remove("main-nav--opened"))});var picture=document.querySelector(".upload__photo"),toolBar=document.querySelector(".upload__tools"),img=picture.querySelector("img");function getCoords(t){var e=t.getBoundingClientRect();return{top:e.top+pageYOffset,bottom:e.bottom+pageYOffset,left:e.left+pageXOffset,right:e.right+pageXOffset}}toolBar.onmousedown=function(t){var a=t.target;if(a.matches(".upload__control")){var e=getCoords(a),n=t.pageX-e.left,i=a.parentElement,s=getCoords(i);return document.onmousemove=function(t){var e=t.pageX-s.left-n;e<0&&(e=0);var o=i.offsetWidth-a.offsetWidth;o<e&&(e=o),a.style.left=e+"px",changePicture(a,e,i.offsetWidth)},!(document.onmouseup=function(){document.onmousemove=document.onmouseup=null})}},img.onmousedown=function(t){if(this.offsetWidth!=imgWidth){var e=getCoords(this),i=getCoords(picture),s=t.pageX-e.left,r=t.pageY-e.top;this.style.left=t.pageX-i.left-s+"px",this.style.top=t.pageY-i.top-r+"px",img.onmousemove=function(t){var e=t.pageX-i.left-s,o=t.pageY-i.top-r,a=picture.offsetWidth-img.offsetWidth,n=picture.offsetHeight-img.offsetHeight;0<e&&(e=0),e<a&&(e=a),0<o&&(o=0),o<n&&(o=n),this.style.left=e+"px",this.style.top=o+"px"},document.onmouseup=function(){img.onmousemove=img.onmouseup=null}}},img.ondragstart=function(){return!1};var imgWidth,cropValue=1,saturateValue=100,contrastValue=100;function changePicture(t,e,o){var a=e/(o/100);if(t.classList.contains("upload__control--crop"))var n=imgWidth+300*a/100;t.classList.contains("upload__control--fill")&&(saturateValue=Math.round(2*a)),t.classList.contains("upload__control--contrast")&&(contrastValue=50+Math.round(a)),picture.style.filter="saturate("+saturateValue+"%) contrast("+contrastValue+"%)",img.style.width=n+"px"}img.onload=function(t){imgWidth=img.offsetWidth,picture.style.height=img.offsetHeight+"px"};