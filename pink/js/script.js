var pageHeader=document.querySelector(".page-header"),navMain=document.querySelector(".main-nav"),navToggle=document.querySelector(".main-nav__toggle");navMain.classList.remove("main-nav--nojs"),pageHeader.classList.remove("page-header--nojs"),navToggle.addEventListener("click",function(){navMain.classList.contains("main-nav--closed")?(navMain.classList.remove("main-nav--closed"),navMain.classList.add("main-nav--opened")):(navMain.classList.add("main-nav--closed"),navMain.classList.remove("main-nav--opened"))});var control,scale,scaleCoords,shiftX,picture=document.querySelector(".upload__photo"),toolBar=document.querySelector(".upload__tools"),img=picture.querySelector("img");function dragStart(e){(control=e.target).matches(".upload__control")&&(shiftX=getCursorCoords(e).pageX-getCoords(control).left,scale=control.parentElement,scaleCoords=getCoords(scale),document.addEventListener("mousemove",dragMove),document.addEventListener("mouseup",dragEnd),e.preventDefault())}function dragMove(e){var t=getCursorCoords(e).pageX-scaleCoords.left-shiftX;t<0&&(t=0);var o=scale.offsetWidth-control.offsetWidth;o<t&&(t=o),control.style.left=t+"px",changePicture(control,t,scale.offsetWidth)}function dragEnd(){document.removeEventListener("mousemove",dragMove),document.removeEventListener("mouseup",dragEnd)}toolBar.addEventListener("mousedown",dragStart),toolBar.addEventListener("touchstart",dragStart),toolBar.addEventListener("touchmove",dragMove),img.onmousedown=function(e){if(this.offsetWidth!=imgWidth){var t=getCoords(this),s=getCoords(picture),r=e.pageX-t.left,i=e.pageY-t.top;this.style.left=e.pageX-s.left-r+"px",this.style.top=e.pageY-s.top-i+"px",img.onmousemove=function(e){var t=e.pageX-s.left-r,o=e.pageY-s.top-i,a=picture.offsetWidth-img.offsetWidth,n=picture.offsetHeight-img.offsetHeight;0<t&&(t=0),t<a&&(t=a),0<o&&(o=0),o<n&&(o=n),this.style.left=t+"px",this.style.top=o+"px"},document.onmouseup=function(){img.onmousemove=img.onmouseup=null}}},img.ondragstart=function(){return!1};var imgWidth,cropValue=1,saturateValue=100,contrastValue=100;function changePicture(e,t,o){var a=t/(o/100);if(e.classList.contains("upload__control--crop"))var n=imgWidth+300*a/100;e.classList.contains("upload__control--fill")&&(saturateValue=Math.round(2*a)),e.classList.contains("upload__control--contrast")&&(contrastValue=50+Math.round(a)),picture.style.filter="saturate("+saturateValue+"%) contrast("+contrastValue+"%)",img.style.width=n+"px"}function getCoords(e){var t=e.getBoundingClientRect();return{top:t.top+pageYOffset,bottom:t.bottom+pageYOffset,left:t.left+pageXOffset,right:t.right+pageXOffset}}function getCursorCoords(e){return"mousedown"==e.type||"mousemove"==e.type?{pageX:e.pageX,pageY:e.pageY}:"touchstart"==e.type||"touchmove"==e.type?{pageX:e.changedTouches[0].pageX,pageY:e.changedTouches[0].pageY}:void 0}img.onload=function(e){imgWidth=img.offsetWidth,picture.style.height=img.offsetHeight+"px"};